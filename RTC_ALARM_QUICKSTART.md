# ESP32S3 Korvo2 V3 RTC闹钟系统 - 快速开始

## 🚀 快速开始

### 1. 硬件准备
- ESP32S3 Korvo2 V3开发板
- PCF8563 RTC芯片（已集成在板上）
- 240x240圆形显示屏
- WiFi网络连接

### 2. 编译烧录
```bash
# 进入项目目录
cd xiaozhi-esp32

# 编译项目
idf.py build

# 烧录固件
idf.py flash

# 查看日志
idf.py monitor
```

### 3. 首次启动
1. **设备启动** → 自动初始化RTC时钟系统
2. **配置WiFi** → 按BOOT键进入配网模式  
3. **时间同步** → 连接WiFi后自动从NTP服务器同步时间
4. **时钟显示** → 待机状态显示任天堂风格圆形时钟

### 4. 语音设置闹钟

#### 基本用法
- **相对时间**: "请设置30分钟后提醒我"
- **绝对时间**: "明天早上8点提醒我起床"  
- **每日重复**: "每天下午5点提醒我下班"
- **取消闹钟**: "取消所有闹钟"
- **查看闹钟**: "列出我的闹钟"

#### 语音命令模式
```
设置模式：
"[请]设置[时间]提醒我[描述]"
"[请][明天/今天][时间]提醒我[描述]"

时间格式：
- "2小时后"、"30分钟后"
- "明天8点"、"今天下午3点"
- "每天7点"、"每日晚上9点"

管理命令：
- "取消闹钟"、"删除闹钟" 
- "列出闹钟"、"查看闹钟"
```

### 5. MCP工具使用

通过AI助手可以使用以下工具：

```
闹钟操作：
- "帮我设置明天7点的闹钟"
- "取消ID为1的闹钟"
- "显示所有设置的闹钟"

时间管理：
- "获取当前时间"
- "检查RTC状态"
- "手动同步时间"
```

### 6. 界面操作

#### 时钟显示
- **待机状态**: 自动显示红色圆形时钟界面
- **对话状态**: 时钟界面自动隐藏
- **闹钟提醒**: 显示黄色通知面板

#### 触摸操作
- **触摸屏幕**: 切换对话/待机状态
- **按BOOT键**: 切换对话状态或WiFi配网

## 🔧 常见问题

### Q: 时间不准确怎么办？
A: 检查WiFi连接，确保能访问NTP服务器。也可以通过AI助手说"手动同步时间"。

### Q: 闹钟没有触发？
A: 确认：
1. 闹钟设置成功（查看闹钟列表）
2. 时间同步正确
3. 设备未进入深度睡眠

### Q: 语音命令识别失败？
A: 尝试：
1. 使用标准的中文语音命令格式
2. 确保网络连接正常
3. 语音清晰，避免环境噪音

### Q: 时钟界面不显示？
A: 检查：
1. 显示屏连接正常
2. 设备处于待机状态（非对话状态）
3. 查看启动日志是否有错误

## 🎯 功能特性

### ✅ 已实现功能
- [x] PCF8563 RTC时钟驱动
- [x] NTP自动时间同步
- [x] 任天堂风格时钟界面
- [x] 中文语音闹钟设置
- [x] 闹钟触发和通知
- [x] NVS数据持久化
- [x] MCP工具接口
- [x] WiFi配网支持

### 🎨 界面风格
- **背景**: 任天堂红色圆形
- **文字**: 白色时间显示
- **提醒**: 黄色通知面板
- **字体**: 系统标准字体
- **分辨率**: 240x240像素

### 🕐 时间管理
- **时区**: 北京时间 (UTC+8)
- **同步源**: 阿里云NTP服务器
- **精度**: RTC芯片±20ppm
- **断电保持**: 支持外部电池

## 📞 技术支持

如遇到问题，请：
1. 查看启动日志中的错误信息
2. 参考详细文档 `RTC_ALARM_INTEGRATION.md`
3. 检查硬件连接和配置

---

🎉 **恭喜！您已完成RTC闹钟系统的快速配置，现在可以享受智能语音闹钟功能了！** 